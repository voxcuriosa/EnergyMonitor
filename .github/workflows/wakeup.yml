name: Wake Up App

on:
  schedule:
    # Run at 06:00, 14:00, and 21:00 UTC every day
    - cron: '0 6 * * *'
    - cron: '0 14 * * *'
    - cron: '0 21 * * *'
  workflow_dispatch: # Allows manual triggering from Actions tab

jobs:
  wakeup:
    runs-on: ubuntu-latest
    steps:
      - name: Random Delay (Save Quota)
        run: |
          # Sleep for a random time between 1 and 45 minutes (max 2700 seconds)
          # We mitigate usage to save your 2000 free monthly GitHub Action minutes.
          SLEEP_TIME=$((1 + RANDOM % 2700))
          echo "Sleeping for $SLEEP_TIME seconds..."
          sleep $SLEEP_TIME

      - name: Wake up Streamlit App
        run: |
          curl -I https://cbvenergy.streamlit.app/ || true
          echo "Ping sent to Streamlit App"
